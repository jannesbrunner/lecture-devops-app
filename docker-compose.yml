version: '3.9'

services:

  todo-app-db:
    container_name: todo-app-db
    hostname: todo-app-db
    image: mongo:4.2.6
    env_file: './app/db/dev.env'
    volumes:
      - ./app/db/local.mongod.conf:/etc/mongod.conf
      - ./app/db/log:/var/log/mongodb/
    ports:
      - '27017:27017'
    networks:
      - todo-app-dev
    command: ["-f", "/etc/mongod.conf"]  

  todo-app-client:
    container_name: todo-app-client
    build:
      context: ./app/client
      dockerfile: dockerfile-client
    ports:
      - '80:80'
    networks:
      - todo-app-dev

  todo-app-server:
    container_name: todo-app-server
    build:
      context: ./app/server
      dockerfile: dockerfile-server
    ports:
      - '3000:3000'
    networks:
      - todo-app-dev      

  

networks:
  todo-app-dev:  